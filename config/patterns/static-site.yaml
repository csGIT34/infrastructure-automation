# Pattern: static-site
# Azure Static Web App for SPAs and JAMstack sites

name: static-site
description: |
  Azure Static Web Apps for hosting single-page applications and static sites.
  Includes built-in CI/CD, global CDN, and free SSL certificates.
  Security groups for developers and admins.

category: single-resource
components:
  - static-web-app
  - security-groups
  - rbac-assignments
  - access-review (prod only)

use_cases:
  - Single-page applications (React, Vue, Angular)
  - JAMstack sites
  - Documentation sites
  - Marketing landing pages
  - Portfolio websites

# T-shirt sizing matrix
sizing:
  small:
    dev:
      sku_tier: Free
      sku_size: Free
      enable_diagnostics: false
      enable_access_review: false
    staging:
      sku_tier: Free
      sku_size: Free
      enable_diagnostics: false
      enable_access_review: false
    prod:
      sku_tier: Standard
      sku_size: Standard
      enable_diagnostics: true
      enable_access_review: true

  medium:
    dev:
      sku_tier: Free
      sku_size: Free
      enable_diagnostics: false
      enable_access_review: false
    staging:
      sku_tier: Standard
      sku_size: Standard
      enable_diagnostics: true
      enable_access_review: false
    prod:
      sku_tier: Standard
      sku_size: Standard
      enable_diagnostics: true
      enable_access_review: true

  large:
    dev:
      sku_tier: Standard
      sku_size: Standard
      enable_diagnostics: true
      enable_access_review: false
    staging:
      sku_tier: Standard
      sku_size: Standard
      enable_diagnostics: true
      enable_access_review: true
    prod:
      sku_tier: Standard
      sku_size: Standard
      enable_diagnostics: true
      enable_access_review: true

# Configuration schema
config:
  required:
    - name
  optional:
    - repository_url:
        type: string
        description: GitHub repository URL for automatic deployments
    - branch:
        type: string
        default: main
        description: Branch to deploy from
    - app_location:
        type: string
        default: "/"
        description: Location of app source code relative to repo root
    - api_location:
        type: string
        default: ""
        description: Location of Azure Functions API (if any)
    - output_location:
        type: string
        default: "build"
        description: Build output directory

# Estimated costs (USD/month)
estimated_costs:
  small:
    dev: 0
    staging: 0
    prod: 9
  medium:
    dev: 0
    staging: 9
    prod: 9
  large:
    dev: 9
    staging: 9
    prod: 9

example:
  version: "1"
  metadata:
    project: myapp
    environment: dev
    business_unit: engineering
    owners:
      - alice@example.com
    location: eastus2
  pattern: static-site
  config:
    name: frontend
    size: small
    app_location: "/src"
    output_location: "dist"
