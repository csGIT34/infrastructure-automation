# Sizing Defaults
# Default t-shirt size per environment when not specified

version: "1"

# Environment defaults
# When a pattern request doesn't specify size, use these defaults
environment_defaults:
  dev: small
  staging: medium
  prod: medium

# Cost limits per environment (USD/month)
# Requests exceeding these limits require explicit approval
cost_limits:
  dev: 500
  staging: 2000
  prod: 10000

# Conditional features
# Features automatically enabled/disabled by environment
conditional_features:
  # Diagnostics
  enable_diagnostics:
    dev: false
    staging: true
    prod: true

  # Access reviews (requires Azure AD P2)
  enable_access_review:
    dev: false
    staging: false
    prod: true

  # Geo-redundant backups
  geo_redundant_backup:
    dev: false
    staging: false
    prod: true

  # Purge protection (disabled - allows immediate purge of soft-deleted resources)
  purge_protection:
    dev: false
    staging: false
    prod: false

# Common sizing mappings
# Maps t-shirt sizes to Azure SKUs
common_skus:
  # Function Apps
  function_app:
    small: Y1      # Consumption (serverless)
    medium: B1     # Basic
    large: S1      # Standard

  # App Service Plans
  app_service:
    small: B1
    medium: S1
    large: P1v2

  # PostgreSQL
  postgresql:
    small: B_Standard_B1ms
    medium: GP_Standard_D2s_v3
    large: GP_Standard_D4s_v3

  # Azure SQL
  azure_sql:
    small: Basic
    medium: S1
    large: S2

  # Storage
  storage:
    small:
      tier: Standard
      replication: LRS
    medium:
      tier: Standard
      replication: GRS
    large:
      tier: Standard
      replication: RAGRS

  # Key Vault
  keyvault:
    small: standard
    medium: standard
    large: premium

  # Event Hub
  eventhub:
    small: Basic
    medium: Standard
    large: Standard

  # Virtual Machines
  linux_vm:
    small: Standard_B1s
    medium: Standard_B2s
    large: Standard_D2s_v3

  # AKS Namespace quotas
  aks_namespace:
    small:
      cpu_limit: "2"
      memory_limit: "4Gi"
      pod_limit: 20
    medium:
      cpu_limit: "4"
      memory_limit: "8Gi"
      pod_limit: 50
    large:
      cpu_limit: "8"
      memory_limit: "16Gi"
      pod_limit: 100

# Retention periods
retention:
  soft_delete:
    dev: 7
    staging: 30
    prod: 90
  backup:
    dev: 7
    staging: 14
    prod: 35
  logs:
    dev: 7
    staging: 30
    prod: 90
